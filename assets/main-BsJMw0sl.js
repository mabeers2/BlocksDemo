(function(){let e=document.createElement(`link`).relList;if(e&&e.supports&&e.supports(`modulepreload`))return;for(let e of document.querySelectorAll(`link[rel="modulepreload"]`))n(e);new MutationObserver(e=>{for(let t of e)if(t.type===`childList`)for(let e of t.addedNodes)e.tagName===`LINK`&&e.rel===`modulepreload`&&n(e)}).observe(document,{childList:!0,subtree:!0});function t(e){let t={};return e.integrity&&(t.integrity=e.integrity),e.referrerPolicy&&(t.referrerPolicy=e.referrerPolicy),e.crossOrigin===`use-credentials`?t.credentials=`include`:e.crossOrigin===`anonymous`?t.credentials=`omit`:t.credentials=`same-origin`,t}function n(e){if(e.ep)return;e.ep=!0;let n=t(e);fetch(e.href,n)}})();var e=[{id:0,height:30,width:30,steps:[[0,30,0,30,2],[5,18,0,11,1],[8,11,5,6,8],[11,27,2,3,9],[18,23,1,13,7],[7,9,11,20,6],[7,18,25,26,5],[9,18,15,20,6],[12,29,10,22,2],[2,8,13,15,1],[4,6,8,15,3],[21,25,4,10,5],[8,9,9,28,7]]},{id:1,height:30,width:30,steps:[[0,30,0,30,1],[1,6,15,26,8],[8,22,1,10,3],[19,28,16,22,3],[7,13,7,26,8],[24,28,11,28,3],[5,17,7,20,3],[10,21,4,17,0],[9,12,13,15,4],[25,29,0,13,6],[5,8,10,16,4],[7,22,10,11,2],[0,11,17,26,5]]},{id:2,height:30,width:30,steps:[[0,30,0,30,2],[7,10,19,23,5],[12,20,1,14,0],[14,25,7,13,9],[19,21,17,27,4],[28,29,2,3,3],[4,15,21,24,2],[3,15,4,13,1],[26,29,22,23,8],[7,25,17,18,4],[9,25,20,28,1],[11,21,23,25,5],[11,20,8,21,0]]},{id:3,height:30,width:30,steps:[[0,30,0,30,4],[5,24,22,29,3],[13,29,8,24,5],[4,24,3,12,6],[4,18,25,27,9],[1,4,15,18,8],[8,22,2,20,9],[9,19,14,26,4],[18,29,1,14,6],[4,6,9,10,1],[15,25,7,16,1],[7,13,13,28,0],[0,3,10,25,3]]},{id:4,height:30,width:30,steps:[[0,30,0,30,8],[3,20,4,5,4],[20,28,8,17,0],[15,28,15,27,7],[9,19,2,11,3],[5,13,23,26,9],[12,29,15,20,3],[21,22,6,21,7],[9,11,1,3,1],[14,26,25,26,4],[6,14,17,26,9],[25,27,20,28,0],[19,25,5,20,1]]}],t={"rgb(31,119,180)":{"rgb(31,119,180)":`rgb(31,119,180)`,"rgb(255,127,14)":`rgb(120,122,113)`,"rgb(44,160,44)":`rgb(36,135,125)`,"rgb(214,39,40)":`rgb(104,87,124)`,"rgb(148,103,189)":`rgb(77,112,183)`,"rgb(140,86,75)":`rgb(74,105,138)`,"rgb(227,119,194)":`rgb(109,119,185)`,"rgb(127,127,127)":`rgb(69,122,158)`,"rgb(188,189,34)":`rgb(93,147,121)`,"rgb(23,190,207)":`rgb(27,147,190)`},"rgb(255,127,14)":{"rgb(31,119,180)":`rgb(165,123,80)`,"rgb(255,127,14)":`rgb(255,127,14)`,"rgb(44,160,44)":`rgb(170,140,26)`,"rgb(214,39,40)":`rgb(238,91,24)`,"rgb(148,103,189)":`rgb(212,117,84)`,"rgb(140,86,75)":`rgb(209,110,38)`,"rgb(227,119,194)":`rgb(243,123,86)`,"rgb(127,127,127)":`rgb(203,127,59)`,"rgb(188,189,34)":`rgb(228,151,22)`,"rgb(23,190,207)":`rgb(162,152,91)`},"rgb(44,160,44)":{"rgb(31,119,180)":`rgb(38,143,98)`,"rgb(255,127,14)":`rgb(128,146,32)`,"rgb(44,160,44)":`rgb(44,160,44)`,"rgb(214,39,40)":`rgb(112,111,42)`,"rgb(148,103,189)":`rgb(85,137,102)`,"rgb(140,86,75)":`rgb(82,130,56)`,"rgb(227,119,194)":`rgb(117,143,104)`,"rgb(127,127,127)":`rgb(77,146,77)`,"rgb(188,189,34)":`rgb(101,171,40)`,"rgb(23,190,207)":`rgb(35,172,109)`},"rgb(214,39,40)":{"rgb(31,119,180)":`rgb(140,71,96)`,"rgb(255,127,14)":`rgb(230,74,29)`,"rgb(44,160,44)":`rgb(146,87,41)`,"rgb(214,39,40)":`rgb(214,39,40)`,"rgb(148,103,189)":`rgb(187,64,99)`,"rgb(140,86,75)":`rgb(184,57,54)`,"rgb(227,119,194)":`rgb(219,71,101)`,"rgb(127,127,127)":`rgb(179,74,74)`,"rgb(188,189,34)":`rgb(203,99,37)`,"rgb(23,190,207)":`rgb(137,99,106)`},"rgb(148,103,189)":{"rgb(31,119,180)":`rgb(101,109,185)`,"rgb(255,127,14)":`rgb(190,112,119)`,"rgb(44,160,44)":`rgb(106,125,131)`,"rgb(214,39,40)":`rgb(174,77,129)`,"rgb(148,103,189)":`rgb(148,103,189)`,"rgb(140,86,75)":`rgb(144,96,143)`,"rgb(227,119,194)":`rgb(179,109,191)`,"rgb(127,127,127)":`rgb(139,112,164)`,"rgb(188,189,34)":`rgb(164,137,127)`,"rgb(23,190,207)":`rgb(98,137,196)`},"rgb(140,86,75)":{"rgb(31,119,180)":`rgb(96,99,117)`,"rgb(255,127,14)":`rgb(186,102,50)`,"rgb(44,160,44)":`rgb(101,115,62)`,"rgb(214,39,40)":`rgb(169,67,61)`,"rgb(148,103,189)":`rgb(143,92,120)`,"rgb(140,86,75)":`rgb(140,86,75)`,"rgb(227,119,194)":`rgb(174,99,122)`,"rgb(127,127,127)":`rgb(134,102,95)`,"rgb(188,189,34)":`rgb(159,127,58)`,"rgb(23,190,207)":`rgb(93,127,127)`},"rgb(227,119,194)":{"rgb(31,119,180)":`rgb(148,119,188)`,"rgb(255,127,14)":`rgb(238,122,121)`,"rgb(44,160,44)":`rgb(153,135,133)`,"rgb(214,39,40)":`rgb(221,87,132)`,"rgb(148,103,189)":`rgb(195,112,192)`,"rgb(140,86,75)":`rgb(192,105,146)`,"rgb(227,119,194)":`rgb(227,119,194)`,"rgb(127,127,127)":`rgb(187,122,167)`,"rgb(188,189,34)":`rgb(211,147,130)`,"rgb(23,190,207)":`rgb(145,147,199)`},"rgb(127,127,127)":{"rgb(31,119,180)":`rgb(88,123,148)`,"rgb(255,127,14)":`rgb(178,127,81)`,"rgb(44,160,44)":`rgb(93,140,93)`,"rgb(214,39,40)":`rgb(161,91,92)`,"rgb(148,103,189)":`rgb(135,117,151)`,"rgb(140,86,75)":`rgb(132,110,106)`,"rgb(227,119,194)":`rgb(167,123,153)`,"rgb(127,127,127)":`rgb(127,127,127)`,"rgb(188,189,34)":`rgb(151,151,89)`,"rgb(23,190,207)":`rgb(85,152,159)`},"rgb(188,189,34)":{"rgb(31,119,180)":`rgb(125,161,92)`,"rgb(255,127,14)":`rgb(214,164,26)`,"rgb(44,160,44)":`rgb(130,177,38)`,"rgb(214,39,40)":`rgb(198,129,36)`,"rgb(148,103,189)":`rgb(172,154,96)`,"rgb(140,86,75)":`rgb(168,147,50)`,"rgb(227,119,194)":`rgb(203,161,98)`,"rgb(127,127,127)":`rgb(163,164,71)`,"rgb(188,189,34)":`rgb(188,189,34)`,"rgb(23,190,207)":`rgb(122,189,103)`},"rgb(23,190,207)":{"rgb(31,119,180)":`rgb(26,161,196)`,"rgb(255,127,14)":`rgb(115,164,129)`,"rgb(44,160,44)":`rgb(31,178,141)`,"rgb(214,39,40)":`rgb(99,129,140)`,"rgb(148,103,189)":`rgb(73,155,199)`,"rgb(140,86,75)":`rgb(69,148,154)`,"rgb(227,119,194)":`rgb(104,161,201)`,"rgb(127,127,127)":`rgb(64,164,175)`,"rgb(188,189,34)":`rgb(89,189,137)`,"rgb(23,190,207)":`rgb(23,190,207)`},"rgb(255,255,255)":{"rgb(31,119,180)":`rgb(165,200,225)`,"rgb(255,127,14)":`rgb(255,203,158)`,"rgb(44,160,44)":`rgb(170,217,170)`,"rgb(214,39,40)":`rgb(238,168,169)`,"rgb(148,103,189)":`rgb(212,194,228)`,"rgb(140,86,75)":`rgb(209,187,183)`,"rgb(227,119,194)":`rgb(243,200,230)`,"rgb(127,127,127)":`rgb(203,203,203)`,"rgb(188,189,34)":`rgb(228,228,166)`,"rgb(23,190,207)":`rgb(162,228,235)`}},n=Object.keys(t);function r(e){let t=e.length,n;for(;t!==0;)n=Math.floor(Math.random()*t),t--,[e[t],e[n]]=[e[n],e[t]];return e}var i=class{constructor(e,t,n,r){this.height=e,this.width=t,this.steps=n,this.id=r}get length(){return this.steps.length}get area(){let e=0;for(let t=0;t<this.length;t++)e+=(this.steps[t][1]-this.steps[t][0])*(this.steps[t][3]-this.steps[t][2]);return e}paint(){let e=Array(this.height).fill(-1).map(()=>Array(this.width).fill(-1));for(let t=0;t<this.length;t++){let n=this.steps[t][4];for(let r=this.steps[t][0];r<this.steps[t][1];r++)for(let i=this.steps[t][2];i<this.steps[t][3];i++)e[r][i]=n}return e}paint_with_palette(e){let t=this.paint();for(let n=0;n<this.height;n++)for(let r=0;r<this.width;r++)t[n][r]=e.at(t[n][r]);return t}},a=class extends i{constructor(e,t,n){super(e,t,[],n),this.all_steps=[]}paint_with_overlay(e,t,n){let r=this.paint_with_palette(e);for(let e=0;e<this.height;e++)for(let i=0;i<this.width;i++)r[e][i]=n[r[e][i]][t[e][i]];return r}},o=class{constructor(e){this.target_program=e,this.user_program=new a(this.target_program.height,this.target_program.width,this.target_program.id),this.img_target=this.target_program.paint_with_palette(n),this.img_current=this.user_program.paint_with_palette(n),this.img_current_plus_overlay=this.user_program.paint_with_overlay(n,this.img_target,t)}},s=class{constructor(e){this.num_trials=e.length,this.i=0,this.order=r(Array.from(Array(this.num_trials).keys())),this.trials=this.get_trials(e)}get_trials(e){var t=[];for(let n=0,r=this.num_trials;n<r;n++)t.push(new o(new i(e[n].height,e[n].width,e[n].steps,e[n].id)));return t}go_forward_one_trial(){this.i<this.num_trials-1&&(this.i+=1)}go_back_one_trial(){this.i>0&&--this.i}get k(){return this.order[this.i]}is_last_trial(){return this.i==this.num_trials-1}};function c(){let e=document.getElementById(`left_grid`),t=document.createDocumentFragment(),r=document.getElementById(`right_grid`),i=document.createDocumentFragment();for(let e=0;e<g.trials[g.k].target_program.height;e++)for(let n=0;n<g.trials[g.k].target_program.width;n++){let r=document.createElement(`button`);r.title=`(${e+1}, ${n+1})`,r.id=`left(${e}, ${n})`,r.disabled=!0,r.style.backgroundColor=g.trials[g.k].img_target[e][n],t.appendChild(r);let a=document.createElement(`button`);a.title=`(${e+1}, ${n+1})`,a.id=`(${e}, ${n})`,a.style.backgroundColor=g.trials[g.k].img_current[e][n],i.appendChild(a)}e.appendChild(t),r.appendChild(i);let a=document.getElementById(`color_picker`);for(let e=0;e<n.length-1;e++){let t=document.createElement(`button`);t.style.backgroundColor=n[e],t.id=n[e],a.appendChild(t)}let o=document.getElementById(`bottom_row`),s=document.createElement(`button`);s.textContent=`Clear`,s.id=`clear`,o.appendChild(s);let c=document.createElement(`button`);c.textContent=`Undo`,c.id=`undo`,o.appendChild(c);let l=document.createElement(`button`);l.textContent=`Toggle Overlay`,l.id=`toggle`,o.appendChild(l);let u=document.createElement(`button`);u.textContent=`Submit + Next Trial`,u.id=`next`,o.appendChild(u)}function l(){if(y){for(let e=0;e<g.trials[g.k].target_program.height;e++)for(let t=0;t<g.trials[g.k].target_program.width;t++){let n=document.getElementById(`(${e}, ${t})`);n.style.backgroundColor=g.trials[g.k].img_current[e][t]}y=!1}else{for(let e=0;e<g.trials[g.k].target_program.height;e++)for(let t=0;t<g.trials[g.k].target_program.width;t++){let n=document.getElementById(`(${e}, ${t})`);n.style.backgroundColor=g.trials[g.k].img_current_plus_overlay[e][t]}y=!0}}function u(e,t,n,r,i){let a=Math.min(t,r),o=Math.max(t,r)+1,s=[Math.min(e,n),Math.max(e,n)+1,a,o,i],c={action:s.toString(),time:Date.now()};g.trials[g.k].user_program.steps.push(s),g.trials[g.k].user_program.all_steps.push(c),d()}function d(){if(g.trials[g.k].img_current=g.trials[g.k].user_program.paint_with_palette(n),g.trials[g.k].img_current_plus_overlay=g.trials[g.k].user_program.paint_with_overlay(n,g.trials[g.k].img_target,t),y)for(let e=0;e<g.trials[g.k].target_program.height;e++)for(let t=0;t<g.trials[g.k].target_program.width;t++){let n=document.getElementById(`(${e}, ${t})`);n.style.backgroundColor=g.trials[g.k].img_current_plus_overlay[e][t]}else for(let e=0;e<g.trials[g.k].target_program.height;e++)for(let t=0;t<g.trials[g.k].target_program.width;t++){let n=document.getElementById(`(${e}, ${t})`);n.style.backgroundColor=g.trials[g.k].img_current[e][t]}}function f(){for(let e=0;e<g.trials[g.k].target_program.height;e++)for(let t=0;t<g.trials[g.k].target_program.width;t++){let n=document.getElementById(`left(${e}, ${t})`);n.style.backgroundColor=g.trials[g.k].img_target[e][t]}}function p(){g.trials[g.k].user_program.length>0&&(g.trials[g.k].user_program.steps.pop(),g.trials[g.k].user_program.all_steps.push({action:`undo`,time:Date.now()}),d())}function m(){g.trials[g.k].user_program.length>0&&(g.trials[g.k].user_program.steps=[],g.trials[g.k].user_program.all_steps.push({action:`clear`,time:Date.now()}),d())}function h(){let e=g.trials[g.k].target_program.paint(),t=g.trials[g.k].user_program.paint();var n=[];for(let r=0;r<g.trials[g.k].target_program.height;r++)for(let i=0;i<g.trials[g.k].target_program.width;i++)t[r][i]!=e[r][i]&&n.push(`(${r+1}, ${i+1})`);if(n.length>0)alert(`Failed to reproduce target at positions: ${n.toString()}`);else if(g.is_last_trial())alert(`Thank you for completing the demo!`);else{g.go_forward_one_trial(),d(),f();let e=document.getElementById(`title`);e.innerHTML=`Trial ${g.i+1} / ${g.trials.length}`}}var g=new s(e);c();var _=null,v=null,y=!1;document.addEventListener(`click`,e=>{if(e.target&&e.target.nodeName===`BUTTON`&&e.target.id.startsWith(`rgb`)&&v===null)e.target.classList.add(`clicked_color`),v=e.target,console.log(v.id);else if(e.target&&e.target.nodeName===`BUTTON`&&e.target.id.startsWith(`rgb`)&&v!=null)v.classList.remove(`clicked_color`),e.target.classList.add(`clicked_color`),v=e.target,console.log(v.id);else if(e.target&&e.target.nodeName===`BUTTON`&&e.target.id===`toggle`)l();else if(e.target&&e.target.nodeName===`BUTTON`&&e.target.id.startsWith(`(`)&&_===null)_=e.target,_.classList.add(`clicked_square`);else if(e.target&&e.target.nodeName===`BUTTON`&&e.target.id.startsWith(`(`)&&_!=null&&v!=null){_.classList.remove(`clicked_square`);let[t,r]=e.target.id.split(/[\W_]+/).slice(1,3).map(Number),[i,a]=_.id.split(/[\W_]+/).slice(1,3).map(Number);u(t,r,i,a,n.indexOf(v.id)),_=null}else e.target&&e.target.nodeName===`BUTTON`&&e.target.id===`undo`?p():e.target&&e.target.nodeName===`BUTTON`&&e.target.id===`clear`?m():e.target&&e.target.nodeName===`BUTTON`&&e.target.id===`next`&&h()});